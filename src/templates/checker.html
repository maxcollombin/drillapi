<!DOCTYPE html>
<html>
<head>
  <title>Service Availability Checker</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    pre { white-space: pre-wrap; }
    .error-box {
      width: 80vw;
      margin: 10px auto;
      background: #f8d7da;
      padding: 10px;
      overflow-x: auto;
      font-size: 0.9em;
    }
    .success-box {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      width: 80vw;
      margin: 10px auto;
      padding: 10px;
    }
    summary { cursor: pointer; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Service Availability Checker</h2>

  {% for canton in results %}
    <h3>Checking service for {{ canton.canton }}</h3>
    <ul>
      {% for check in canton.checks %}
        <li>
          <strong>{{ check.url }}</strong><br>
          {% if check.error %}
            <details class="error-box">
              <summary>❌ Request Error</summary>
              <pre>{{ check.error }}</pre>
            </details>
          {% elif check.success %}
            <details class="success-box">
              <summary>✅ Success (HTTP {{ check.status }})</summary>
              <pre>{{ check.content }}</pre>
            </details>
          {% else %}
            <details class="error-box">
              <summary>❌ Failed (HTTP {{ check.status }})</summary>
              <pre>{{ check.content }}</pre>
            </details>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endfor %}

  <strong>All checks completed.</strong>
</body>
</html>
